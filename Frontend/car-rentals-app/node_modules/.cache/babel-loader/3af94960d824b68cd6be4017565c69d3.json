{"ast":null,"code":"import axios from \"axios\";\nimport { apiEndpoint } from \"./config\";\nimport jwtDecode from \"jwt-decode\";\nconst tokenKey = \"token\";\n\nfunction postRental(car, rentalDays, callback) {\n  const data = {\n    carId: car._id,\n    rentalDays: rentalDays\n  };\n  axios.post(`${apiEndpoint}/rental`, data, {\n    headers: {\n      \"x-auth-token\": getJWT()\n    }\n  }).then(response => {\n    alert(response.data);\n    callback(response);\n  }).catch(err => {\n    alert(err.response.data);\n    callback(err.response);\n  });\n}\n\nfunction getCars(callback) {\n  axios.get(apiEndpoint + \"/cars\").then(response => {\n    const data = response.data;\n    callback(data);\n  });\n}\n\nfunction getCarById(id, callback) {\n  const ID = id.split(\"\").slice(6).join(\"\");\n  axios.get(`${apiEndpoint}/cars/${ID}`).then(response => {\n    callback(response.data);\n  }).catch(err => alert(err.response));\n}\n\nfunction postCars(car) {\n  axios.post(apiEndpoint + \"/cars\", car, {\n    headers: {\n      \"x-auth-token\": getJWT()\n    }\n  }).then(data => console.log(\"Car saved to database!\" + data)).catch(err => alert(err.response.data));\n}\n\nfunction registerUser(data) {\n  axios.post(apiEndpoint + \"/user/register\", data).then(response => {\n    alert(response.data + \" Please login!\");\n  }).catch(err => {\n    if (err.response.data.error) {\n      const serverErrors = [...err.response.data.error.details];\n      alert(\"password\" + serverErrors[0].message);\n    } else {\n      alert(err.response.data);\n    }\n  });\n}\n\nfunction loginUser(data) {\n  axios.post(apiEndpoint + \"/user/login\", data).then(response => {\n    localStorage.setItem(\"token\", response.headers[\"x-auth-token\"]);\n    window.location = \"/\";\n  }).catch(err => {\n    alert(err.response.data);\n  });\n}\n\nfunction logOut() {\n  axios.post(apiEndpoint + \"/user/logout\", {}, {\n    headers: {\n      \"x-auth-token\": getJWT()\n    }\n  }).then(response => {\n    alert(response.data);\n    window.location = \"/\";\n    localStorage.removeItem(tokenKey);\n  }).catch(err => {\n    console.log(err.response);\n    alert(err.response.data);\n  });\n}\n\nfunction getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    const user = jwtDecode(jwt);\n    return user;\n  } catch (ex) {\n    return null;\n  }\n}\n\nfunction getUserRentals(callback) {\n  axios.get(`${apiEndpoint}/user/profile`, {\n    headers: {\n      \"x-auth-token\": getJWT()\n    }\n  }).then(response => {\n    callback(response.data);\n  }).catch(err => alert(err.response.data));\n}\n\nfunction getJWT() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport { getCars, postCars, registerUser, loginUser, logOut, getCurrentUser, getCarById, getUserRentals, getJWT, postRental };","map":{"version":3,"sources":["E:/2022/CarRentalAppReactNodejs-master/Frontend/car-rentals-app/src/RentalServices.js"],"names":["axios","apiEndpoint","jwtDecode","tokenKey","postRental","car","rentalDays","callback","data","carId","_id","post","headers","getJWT","then","response","alert","catch","err","getCars","get","getCarById","id","ID","split","slice","join","postCars","console","log","registerUser","error","serverErrors","details","message","loginUser","localStorage","setItem","window","location","logOut","removeItem","getCurrentUser","jwt","getItem","user","ex","getUserRentals"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,MAAMC,QAAQ,GAAG,OAAjB;;AAEA,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,UAAzB,EAAqCC,QAArC,EAA+C;AAC7C,QAAMC,IAAI,GAAG;AAAEC,IAAAA,KAAK,EAAEJ,GAAG,CAACK,GAAb;AAAkBJ,IAAAA,UAAU,EAAEA;AAA9B,GAAb;AACAN,EAAAA,KAAK,CACFW,IADH,CACS,GAAEV,WAAY,SADvB,EACiCO,IADjC,EACuC;AACnCI,IAAAA,OAAO,EAAE;AACP,sBAAgBC,MAAM;AADf;AAD0B,GADvC,EAMGC,IANH,CAMQC,QAAQ,IAAI;AAChBC,IAAAA,KAAK,CAACD,QAAQ,CAACP,IAAV,CAAL;AACAD,IAAAA,QAAQ,CAACQ,QAAD,CAAR;AACD,GATH,EAUGE,KAVH,CAUSC,GAAG,IAAI;AACZF,IAAAA,KAAK,CAACE,GAAG,CAACH,QAAJ,CAAaP,IAAd,CAAL;AACAD,IAAAA,QAAQ,CAACW,GAAG,CAACH,QAAL,CAAR;AACD,GAbH;AAcD;;AACD,SAASI,OAAT,CAAiBZ,QAAjB,EAA2B;AACzBP,EAAAA,KAAK,CAACoB,GAAN,CAAUnB,WAAW,GAAG,OAAxB,EAAiCa,IAAjC,CAAsCC,QAAQ,IAAI;AAChD,UAAMP,IAAI,GAAGO,QAAQ,CAACP,IAAtB;AACAD,IAAAA,QAAQ,CAACC,IAAD,CAAR;AACD,GAHD;AAID;;AACD,SAASa,UAAT,CAAoBC,EAApB,EAAwBf,QAAxB,EAAkC;AAChC,QAAMgB,EAAE,GAAGD,EAAE,CACVE,KADQ,CACF,EADE,EAERC,KAFQ,CAEF,CAFE,EAGRC,IAHQ,CAGH,EAHG,CAAX;AAIA1B,EAAAA,KAAK,CACFoB,GADH,CACQ,GAAEnB,WAAY,SAAQsB,EAAG,EADjC,EAEGT,IAFH,CAEQC,QAAQ,IAAI;AAChBR,IAAAA,QAAQ,CAACQ,QAAQ,CAACP,IAAV,CAAR;AACD,GAJH,EAKGS,KALH,CAKSC,GAAG,IAAIF,KAAK,CAACE,GAAG,CAACH,QAAL,CALrB;AAMD;;AACD,SAASY,QAAT,CAAkBtB,GAAlB,EAAuB;AACrBL,EAAAA,KAAK,CACFW,IADH,CACQV,WAAW,GAAG,OADtB,EAC+BI,GAD/B,EACoC;AAChCO,IAAAA,OAAO,EAAE;AACP,sBAAgBC,MAAM;AADf;AADuB,GADpC,EAMGC,IANH,CAMQN,IAAI,IAAIoB,OAAO,CAACC,GAAR,CAAY,2BAA2BrB,IAAvC,CANhB,EAOGS,KAPH,CAOSC,GAAG,IAAIF,KAAK,CAACE,GAAG,CAACH,QAAJ,CAAaP,IAAd,CAPrB;AAQD;;AACD,SAASsB,YAAT,CAAsBtB,IAAtB,EAA4B;AAC1BR,EAAAA,KAAK,CACFW,IADH,CACQV,WAAW,GAAG,gBADtB,EACwCO,IADxC,EAEGM,IAFH,CAEQC,QAAQ,IAAI;AAChBC,IAAAA,KAAK,CAACD,QAAQ,CAACP,IAAT,GAAgB,gBAAjB,CAAL;AACD,GAJH,EAKGS,KALH,CAKSC,GAAG,IAAI;AACZ,QAAIA,GAAG,CAACH,QAAJ,CAAaP,IAAb,CAAkBuB,KAAtB,EAA6B;AAC3B,YAAMC,YAAY,GAAG,CAAC,GAAGd,GAAG,CAACH,QAAJ,CAAaP,IAAb,CAAkBuB,KAAlB,CAAwBE,OAA5B,CAArB;AACAjB,MAAAA,KAAK,CAAC,aAAagB,YAAY,CAAC,CAAD,CAAZ,CAAgBE,OAA9B,CAAL;AACD,KAHD,MAGO;AACLlB,MAAAA,KAAK,CAACE,GAAG,CAACH,QAAJ,CAAaP,IAAd,CAAL;AACD;AACF,GAZH;AAaD;;AAED,SAAS2B,SAAT,CAAmB3B,IAAnB,EAAyB;AACvBR,EAAAA,KAAK,CACFW,IADH,CACQV,WAAW,GAAG,aADtB,EACqCO,IADrC,EAEGM,IAFH,CAEQC,QAAQ,IAAI;AAChBqB,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BtB,QAAQ,CAACH,OAAT,CAAiB,cAAjB,CAA9B;AACA0B,IAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACD,GALH,EAMGtB,KANH,CAMSC,GAAG,IAAI;AACZF,IAAAA,KAAK,CAACE,GAAG,CAACH,QAAJ,CAAaP,IAAd,CAAL;AACD,GARH;AASD;;AAED,SAASgC,MAAT,GAAkB;AAChBxC,EAAAA,KAAK,CACFW,IADH,CAEIV,WAAW,GAAG,cAFlB,EAGI,EAHJ,EAII;AACEW,IAAAA,OAAO,EAAE;AACP,sBAAgBC,MAAM;AADf;AADX,GAJJ,EAUGC,IAVH,CAUQC,QAAQ,IAAI;AAChBC,IAAAA,KAAK,CAACD,QAAQ,CAACP,IAAV,CAAL;AACA8B,IAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACAH,IAAAA,YAAY,CAACK,UAAb,CAAwBtC,QAAxB;AACD,GAdH,EAeGc,KAfH,CAeSC,GAAG,IAAI;AACZU,IAAAA,OAAO,CAACC,GAAR,CAAYX,GAAG,CAACH,QAAhB;AACAC,IAAAA,KAAK,CAACE,GAAG,CAACH,QAAJ,CAAaP,IAAd,CAAL;AAED,GAnBH;AAoBD;;AAED,SAASkC,cAAT,GAA0B;AACxB,MAAI;AACF,UAAMC,GAAG,GAAGP,YAAY,CAACQ,OAAb,CAAqBzC,QAArB,CAAZ;AACA,UAAM0C,IAAI,GAAG3C,SAAS,CAACyC,GAAD,CAAtB;AACA,WAAOE,IAAP;AACD,GAJD,CAIE,OAAOC,EAAP,EAAW;AACX,WAAO,IAAP;AACD;AACF;;AACD,SAASC,cAAT,CAAwBxC,QAAxB,EAAkC;AAChCP,EAAAA,KAAK,CACFoB,GADH,CACQ,GAAEnB,WAAY,eADtB,EACsC;AAClCW,IAAAA,OAAO,EAAE;AACP,sBAAgBC,MAAM;AADf;AADyB,GADtC,EAMGC,IANH,CAMQC,QAAQ,IAAI;AAChBR,IAAAA,QAAQ,CAACQ,QAAQ,CAACP,IAAV,CAAR;AACD,GARH,EASGS,KATH,CASSC,GAAG,IAAIF,KAAK,CAACE,GAAG,CAACH,QAAJ,CAAaP,IAAd,CATrB;AAUD;;AACD,SAASK,MAAT,GAAkB;AAChB,SAAOuB,YAAY,CAACQ,OAAb,CAAqBzC,QAArB,CAAP;AACD;;AACD,SACEgB,OADF,EAEEQ,QAFF,EAGEG,YAHF,EAIEK,SAJF,EAKEK,MALF,EAMEE,cANF,EAOErB,UAPF,EAQE0B,cARF,EASElC,MATF,EAUET,UAVF","sourcesContent":["import axios from \"axios\";\nimport { apiEndpoint } from \"./config\";\nimport jwtDecode from \"jwt-decode\";\nconst tokenKey = \"token\";\n\nfunction postRental(car, rentalDays, callback) {\n  const data = { carId: car._id, rentalDays: rentalDays };\n  axios\n    .post(`${apiEndpoint}/rental`, data, {\n      headers: {\n        \"x-auth-token\": getJWT()\n      }\n    })\n    .then(response => {\n      alert(response.data);\n      callback(response);\n    })\n    .catch(err => {\n      alert(err.response.data);\n      callback(err.response);\n    });\n}\nfunction getCars(callback) {\n  axios.get(apiEndpoint + \"/cars\").then(response => {\n    const data = response.data;\n    callback(data);\n  });\n}\nfunction getCarById(id, callback) {\n  const ID = id\n    .split(\"\")\n    .slice(6)\n    .join(\"\");\n  axios\n    .get(`${apiEndpoint}/cars/${ID}`)\n    .then(response => {\n      callback(response.data);\n    })\n    .catch(err => alert(err.response));\n}\nfunction postCars(car) {\n  axios\n    .post(apiEndpoint + \"/cars\", car, {\n      headers: {\n        \"x-auth-token\": getJWT()\n      }\n    })\n    .then(data => console.log(\"Car saved to database!\" + data))\n    .catch(err => alert(err.response.data));\n}\nfunction registerUser(data) {\n  axios\n    .post(apiEndpoint + \"/user/register\", data)\n    .then(response => {\n      alert(response.data + \" Please login!\");\n    })\n    .catch(err => {\n      if (err.response.data.error) {\n        const serverErrors = [...err.response.data.error.details];\n        alert(\"password\" + serverErrors[0].message);\n      } else {\n        alert(err.response.data);\n      }\n    });\n}\n\nfunction loginUser(data) {\n  axios\n    .post(apiEndpoint + \"/user/login\", data)\n    .then(response => {\n      localStorage.setItem(\"token\", response.headers[\"x-auth-token\"]);\n      window.location = \"/\";\n    })\n    .catch(err => {\n      alert(err.response.data);\n    });\n}\n\nfunction logOut() {\n  axios\n    .post(\n      apiEndpoint + \"/user/logout\",\n      {},\n      {\n        headers: {\n          \"x-auth-token\": getJWT()\n        }\n      }\n    )\n    .then(response => {\n      alert(response.data);\n      window.location = \"/\";\n      localStorage.removeItem(tokenKey);\n    })\n    .catch(err => {\n      console.log(err.response);\n      alert(err.response.data);\n      \n    });\n}\n\nfunction getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    const user = jwtDecode(jwt);\n    return user;\n  } catch (ex) {\n    return null;\n  }\n}\nfunction getUserRentals(callback) {\n  axios\n    .get(`${apiEndpoint}/user/profile`, {\n      headers: {\n        \"x-auth-token\": getJWT()\n      }\n    })\n    .then(response => {\n      callback(response.data);\n    })\n    .catch(err => alert(err.response.data));\n}\nfunction getJWT() {\n  return localStorage.getItem(tokenKey);\n}\nexport {\n  getCars,\n  postCars,\n  registerUser,\n  loginUser,\n  logOut,\n  getCurrentUser,\n  getCarById,\n  getUserRentals,\n  getJWT,\n  postRental\n};\n"]},"metadata":{},"sourceType":"module"}